```uml
@startuml

opt 画面表示
 ユーザー -> WEBサーバー:サイト起動のリクエスト
 WEBサーバー -> DBサーバー:リクエスト要求
 DBサーバー -> DBサーバー:人気商品をSQLで検索
 DBサーバー -> WEBサーバー:結果送信
 WEBサーバー -> ユーザー:結果を画面に表示
end

opt 検索
 ユーザー -> WEBサーバー:キーワードを送信
 WEBサーバー -> DBサーバー:キーワードを送信
 DBサーバー -> DBサーバー:キーワードを基にSQLで検索
 DBサーバー -> WEBサーバー:結果を送信
 alt 成功
  WEBサーバー -> ユーザー:商品を表示
 else 失敗
  WEBサーバー -> ユーザー:エラーメッセージを表示
  WEBサーバー -> ユーザー:もう一度入力するように案内
 end
end

opt 商品購入
 ユーザー -> WEBサーバー:キーワードを送信
 WEBサーバー -> DBサーバー:キーワード送信
 DBサーバー -> DBサーバー:キーワードを基にSQLで検索
 alt 商品を見つけた
  WEBサーバー -> ユーザー:次の画面を表示
 else 商品がなかった
  WEBサーバー -> ユーザー:エラー表示
  WEBサーバー -> ユーザー:フォームを送信
 end
end
@enduml
```
