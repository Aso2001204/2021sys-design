```uml
@startuml
opt 画面表示
 ユーザー -> WEBサーバー:サイト起動
 WEBサーバー -> DBサーバー:リクエスト要求
 DBサーバー -> DBサーバー:人気の商品をSQLで検索
 DBサーバー -> WEBサーバー:結果送信
 WEBサーバー -> ユーザー:結果を画面表示
end

opt 検索
 ユーザー -> WEBサーバー:キーワードで検索
 WEBサーバー -> DBサーバー:キーワードを渡す
 DBサーバー -> DBサーバー:キーワードを基にSQLで検索
 DBサーバー -> WEBサーバー:結果を表示
 alt 成功
  WEBサーバー -> ユーザー:商品を表示
 else 失敗
  WEBサーバー -> ユーザー:エラーを表示
 end
end

opt 商品購入
 ユーザー -> WEBサーバー:リクエスト要求
 WEBサーバー -> DBサーバー:リクエスト要求
 DBサーバー -> DBサーバー:SQLで検索
 DBサーバー -> WEBサーバー:結果を表示
 WEBサーバー -> ユーザー:結果表示
 ユーザー -> WEBサーバー:必要事項を送信
 WEBサーバー -> DBサーバー:必要事項を送信
 DBサーバー -> DBサーバー:確認
 alt 入力ミスがない
  DBサーバー -> WEBサーバー:次の入力画面を表示
  WEBサーバー -> ユーザー:次の入力画面を表示
 else 入力ミスがある
  DBサーバー -> WEBサーバー:エラーを送信
  WEBサーバー -> ユーザー:エラーを表示
  WEBサーバー -> ユーザー:必要事項入力画面表示
 end
 ユーザー -> WEBサーバー:支払情報を送信
 WEBサーバー -> DBサーバー:支払情報を送信
 DBサーバー -> DBサーバー:確認
 alt 入力ミスがない
  DBサーバー -> WEBサーバー:確認画面を表示
  WEBサーバー -> ユーザー:確認画面を表示
 else 入力ミスがある
  DBサーバー -> WEBサーバー:エラーを送信
  WEBサーバー -> ユーザー:エラーを表示
  WEBサーバー -> ユーザー:支払情報画面表示
 end
 ユーザー -> WEBサーバー:購入のリクエスト送信
 WEBサーバー -> DBサーバー:購入のリクエスト送信
 DBサーバー -> DBサーバー:登録
 DBサーバー -> WEBサーバー:完了画面表示
 webサーバー -> ユーザー:完了画面表示
end
@enduml
```
